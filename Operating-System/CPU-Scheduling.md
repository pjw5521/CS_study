## CPU-Scheduling (CPU 스케줄링)

#### 작성자 : [박지원](@pjw5521)

### 면접 질문 예시
- 비선점 / 선점 스케줄링 차이
- cpu 스케줄링의 종류 
- 스케줄링 정책 선정 기준 
- 스케줄링 별 문제점과 보완점 (호위 효과, 기아, 에이징 등)

### 1. **CPU 스케줄링** 이란 ?
- CPU는 동시에 여러 개의 프로세스를 처리할 수 없기 때문에, 한 순간에 어떤 프로세스가 CPU를 사용할지 선택하는 정책 

### 2. WHEN? 
- 실행상태에서 대기상태로 전환될 때
- 실행상태에서 준비상태로 전환될 때 
- 대기상태에서 준비상태로 전환될 때
- 종료될 때 

## 3. CPU 스케줄링 종류 
### 1-1) 비선점(Non-preemptive) 스케줄링
- 이미 할당된 CPU를 다른 프로세스가 빼앗아 사용할 수 없는 스케줄링 기법
- 장점 : 문맥 교환으로 인한 오버헤드 적음, 일광 처리에 유용 
- 단점 : 긴급 응답을 요구하는 경우 부적합 

### 1-2) 비선점 스케줄링 종류 
**FCFS(First Come First Served)**
- 도착한 순서대로 스케줄링 하는 기법 
- 장점 : 작업 시간 예측이 쉽고 응답 시간 차이가 작음 
#### 문제점 
- 호위 효과 (convey effect) : 다른 프로세스들이 하나의 긴 프로세스가 종료되길 기다리는 현상 

**SJF(Shortest - Job - First)**
- 실행시간이 짧은 프로세스 먼저 실행하는 스케줄링 기법
#### 문제점
- 기아(Starvation) : 긴 실행시간을 가지는 프로세스가 무한히 대기하는 현상 
**HRN(Highest Response ratio)**
- 우선 순위 = (대기시간 + 서비스 시간) / 서비스 시간
- 우선순위 높은 프로세스 먼저 실행하는 스케줄링 기법
- 대기 시간이 길어질수록 우선 순위가 높아지므로 SJF 보완 가능 

**Deadline**
- 프로세스에게 일정한 시간을 할당하여 그 시간 안에 완료하도록 하는 스케줄링 기법 

**우선순위(Priority)**
- 프로세스 별 우선순위를 부여하여 높은 우선순위부터 실행하는 스케줄링 기법
- 정적/ 동적 

### 2-1) 선점(Preemptive) 스케줄링
- 이미 할당된 CPU를 다른 프로세스가 강제로 빼앗아 사용할 수 있는 스케줄링 기법 
- 장점 : 실시간 처리 유용, 사용자 친화적 
- 단점 : 문맥교환에 따른 오버 헤드 존재 
    + 문맥교환(context witch) : 하나의 프로세스가 CPU를 사용 중인 상태에서 다른 프로세스가 CPU를 사용하도록 하기 위해, 이전의 프로세스의 상태를 보관하고 새로운 프로세스의 상태를 적재하는 작업

### 2-2) 선점 스케줄링 종류 
**SRTF(Shortest Remaining Time First)**
- 실행시간이 가장 짧은 프로세스가 도착하면 cpu를 선점하는 스케줄링 기법
- 새로운 프로세스가 도착할 때마다 새로운 스케줄링 
#### 문제점 
- 기아(Starvation) 
- 문맥 교환 부담 

**선점 우선순위(Priority)**
- 더 높은 우선순위를 가지는 프로세스 도착 시 cpu를 선점하는 스케줄링 기법
#### 문제점 
- 기아(Starvation)
- 무기한 봉쇄(Indefinite blocking): 실행 준비는 되어있으나 CPU 를 사용못하는 프로세스를 CPU 가 무기한 대기하는 상태
#### 해결
- aging : 오래 기다리면 우선순위를 높여주는 방법 

**RR(Round Rodin)**
- FCFS 스케줄링 방식을 선점형으로 바꾼 스케줄링 기법 방식으로, 동일한 크기의 할당 시간을 설정하여 할당 시간이 지나면 대기 큐의 마지막에 위치
- 장점 : 빠른 응답 시간 
#### 문제점 
- 할당 시간이 너무 크면 FCFS와 같아지게 되고, 너무 작으면 문맥교환 부담이 커짐  

**EDF(Earliest Deadline First)**
- 최단 마감시간 우선 알고리즘으로, 마감 시간이 가까울 수록 높은 우선 순위를 가짐 
#### 문제점 
- 마감 시간 예측 어려움 

**MLQ(Multi Level Queue)**
- 다른 우선 순위를 가지는 여러 개의 큐를 사용하는 스케줄링 기법
- 큐마다 독자적인 스케줄링을 가짐 
- 큐 간 프로세스 이동 불가 

**MLFQ(Multi Level Feedback Queue)**
- MLQ에서 프로세스가 큐를 이동할 수 있도록 개선한 스케줄링 기법
- 새로운 프로세스는 높은 우선순위, 프로세스의 실행이 길어질수록 낮은 우선순위 큐로 이동 

### 4. CPU 스케줄링 선정 기준 
- 사용자 관점 : 대기시간, 응답시간, 반환시간(대기시간+응답시간)을 줄일 수 있는 방법 사용
- 시스템 관점 : CPU 사용률, 처리량을 늘릴 수 있는 방법 사용 