
## 멀티 스레드<br/><br/>

### 멀티 쓰레드란?

- 일반적으로 하나의 프로세스는 하나의 스레드를 가지고 작업을 수행합니다.

- 하지만, 멀티 스레드(multi thread)란 하나의 프로세스 내에서 둘 이상의 스레드가 동시에 작업을 수행하는 것을 의미한다. 이때 스레드들은 자원을 공유하고 자원의 생성과 관리의 중복성을 최소화 합니다.

- 또한, 멀티 스레드(multi thread)는 여러개의 CPU를 사용하여 여러 프로세스를 동시에 수행하는 것을 의미합니다.<br/><br/>

### 멀티 쓰레드를 사용하는 이유

- 프로세스를 이용하여 동시에 처리하던 일을 스레드로 구현하는 경우 메모리 공간과 시스템 자원 소모가 줄어든다. 

- 프로세스의 경우 IPC 통신을 주로 이용하지만 스레드는 별도의 자원을 이용하는 것이 아닌 전역 변수의 공간 또는 동적으로 할당 된 공간인 힙(Heap) 영역을 이용하여 데이터를 주고 받을 수 있다. 
  -> 즉 통신 방법이 간단해진다.
  -> 컨텍스트 스위치가 일어날 때 캐시 메모리를 비울 필요가 없다.
  -> 시스템의 처리량 향상되고 자원 소모가 줄어들어 자연스럽게 프로그램의 응답시간이 단축된다.

▶︎ 이러한 장점 때문에 여러 프로세스로 할 수 있는 작업들을 하나의 프로세스에서 여러 스레드로 나누어 수행한다.<br/><br/>


### 멀티 스레드의 장점

- 멀티 스레드(multi thread)는 각 스레드가 자신이 속한 프로세스의 메모리를 공유하므로, 시스템 자원의 낭비가 적습니다.

- 또한, 하나의 스레드가 작업을 할 때 다른 스레드가 별도의 작업을 할 수 있어 사용자의 응답성도 좋아집니다.

1. 시스템 자원에 관한 효율성  
- 프로세스 생성은 많은 시간과 자원을 소비합니다. 이러한 단점을 최소한 시킨 일종의 스레드(경량화된 프로세스)를 생성하는 것입니다. 
멀티 스레드에서 스레드간 스택 영역만 비 공유하고 데이터 영역과 힙 영역을 공유합니다. 

2. 메모리
- 멀티 쓰레드 컨텍스트 스위칭시 데이터 영역과 힙을 올리고 내릴 필요 없다. 때문에 스레드의 생성 및 컨텍스트 스위칭은 프로세스의 생성 및 컨텍스트 스위칭보다 빠릅니다.

3. 통신
- 스레드 사이에서의 데이터 교환에는 특별한 기법이 필요없다. 왜냐하면 공유하는 데이터 영역과 힙 영역을 통해서 데이터 교환이 가능하기 때문입니다.<br/><br/>

### 멀티 스레드의 단점

1. 공유 자원에 대한 문제점  

- 멀티 프로세스 기반으로 프로그래밍할 때는 프로세스간 공유하는 자원이 없기 때문에 동일한 자원에 동시에 접근하는 일이 없지만 멀티 쓰레딩을 기반으로 프로그래밍 할 때는 이 부분을 신경써야 한다. 서로 다른 쓰레드가 데이터와 힙 영역을 공유하기 때문에 어떤 쓰레드가 다른 쓰레드에서 사용중인 변수나 자료 구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있기 때문입니다.

2. 동기화 부분에 대한 문제점  

- 자원 공유 문제로 인해 멀티 스레딩 환경에는 동기화 작업이 필요합니다. 그래서 동기화를 통해 작업 처리 순서를 컨트롤하고 공유 자원에 대한 접근을 컨트롤 하는 것입니다. 하지만 이로 인해 병목 현상이 발생하여 성능이 저하될 가능성이 있습니다. 그러므로 과도한 락으로 인한 병목 현상을 줄여야 합니다. 특히 불필요한 부분에 동기화를 진행하면 전체 성능에도 영향을 미치기 때문입니다. 즉 동기화 부분에 대한 고민이 필요합니다.

<br/><br/>


### 멀티 쓰레드와 멀티 프로세스의 차이

- 멀티 스레드(multi thread)와 멀티 프로세스(multi process) 모두 여러 흐름을 동시에 수행한다는 공통점을 갖고 있습니다. 하지만 멀티 프로세스는 각 프로세스가 독립적인 메모리를 갖고 별도로 실행되지만, 멀티 스레드는 각 스레드가 자신이 속한 프로세스의 메모리를 공유한다는 점이 다릅니다.
