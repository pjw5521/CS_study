## Process-Synchronization (프로세스 동기화)

#### 작성자 : [박지원](@pjw5521)

### 면접 질문 예시
- 임계 영역과 해결을 위한 조건 
- 교착 상태와 발생할 수 있는 조건 
- 프로세스 동기화 방법 

### 1. **프로세스 동기화** 란?
- 한 객체에 여러 쓰레드 접근을 막기 위해, 하나의 자원을 한순간에 하나의 쓰레드만이 이용하도록 제어하는 것

### 2. **임계영역(Critical Section)** 이란?
- 동일한 자원을 동시에 접근하는 작업을 실행하는 코드 영역 
- 프로세스들이 임계영역을 함께 사용할 수 있도록 설계해야함

### 3. 임계 영역 문제 해결을 위한 기본 조건 
1) 상호 배제 (Mutual Exclusion)
- 하나의 프로세스가 임계 영역에 들어가 있다면 다른 프로세스는 들어갈 수 없어야 함 
2) 진행 (Progress)
- 임계 영역에 들어간 프로세스가 없는 상태에서 임계 영역으로 들어가려는 프로세스가 여러 개라면 어느 것이 들어갈지 결정해줘야 함 
3) 한정 대기 (Bounded waiting)
- 다른 프로세스의 기아(Starvation)를 방지하기 위해, 한 번 임계 구역에 들어간 프로세스는 다음 번 임계 영역에 들어갈 때 제한을 두어야 함 

### 4. 해결 방법 
- 스레드의 경우 뮤텍스 락, 프로세스의 경우 카운팅 세마포어 사용
 
**세마포어**
- 사용 중인 자원을 lock하는데 사용되는 보호된 변수 또는 추상 데이터 유형 
- 공유 자원에 여러 프로세스가 접근하는 것을 막는 것 
- 세마포어 값은 가용한 자원의 개수로 초기화, 상태를 나타내는 간단한 카운터
- 꼭 1개의 프로세스만이 자원을 점유하는 것이 아니라, 프로세스의 최대 허용치만큼 동시에 사용자가 접근하여 사용 가능 

**뮤텍스 락(Mutex Lock)**
- 뮤텍스(Mutex) : 상태가 0,1 뿐인 이진 세마포어 
- 임계 영역에 진입하는 경우 lock을 획득, 빠져나올 때는 lock을 방출함으로써 동시에 접근하지 못하도록 함 
- Lock과 Unlock

세마포어와 뮤텍스 락의 차이
- 동기화 대상의 개수 
- 뮤텍스는 동기화 대상이 하나, 세마포어는 동기화 대상이 하나 이상 

### 5. 교착 상태(Deadlock)
- 두 개 이상의 프로세스나 스레드가 서로의 자원을 기다리면서 무한히 대기하는 상태 
- 서로 상대방의 작업이 끝나기를 기다리고 있기 때문에, 다음 단계로 진행할 수 없음 

### 6. 교착 상태 필요조건 
1) 상호 배제 (Mutual Exclusion)
- 하나의 프로세스가 임계 영역에 들어가 있다면 다른 프로세스는 들어갈 수 없어야 함 
2) 점유와 대기 (Hold and Wait)
- 하나의 자원을 소유하고 다른 프로세스 또는 스레드의 자원을 요청하는 상태 
3) 비선점 (Non-preemptive)
- 다른 프로세스에서 자원을 사용하는 동안 자원을 강제로 가져올 수 없음 
4) 환형 대기(Circle wait)
- 각 프로세스가 다음 프로세스가 요구하는 자원을 가지고 있는 상태
- 예를 들어, A->B, B->C, C->A 에게 서로 자원을 요청하고 기다리는 상태 

### 7. 교착 상태 해결 방법
- 위의 4가지 조건 중 하나 이상 제거 
- 대부분 환형 대기가 발생하는 것을 막는데 초점 
1) 예방 
- 교착 상태가 발생하지 않도록 하는 것 
2) 회피
- 교착 상태를 피하는 것 
- Dijkstra의 뱅커 알고리즘(Banker's algorithm)
    + 프로세스가 자원을 요구할 때 시스템은 자원을 할당한 후에도 안정 상태로 남아있게 되는지를 사전에 검사하여 교착 상태를 회피하는 기법
    + 안정 상태에 있으면 자원을 할당하고, 그렇지 않으면 다른 프로세스들이 자원을 해지할 때까지 대기
3) 탐지
- 교착 상태가 발생하면 탐지하는 것
4) 복구 
- 프로세스 중지, 자원 선점 

